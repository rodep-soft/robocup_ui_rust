# Robot UI Development Guide

## Current Status

✅ **Tauri app builds and runs successfully**  
⏳ **ROS2 integration TODO** - sensor_msgs resolution issue with colcon-cargo

## Working Directory

You work inside the Docker container at `/root/`, which is mounted from your host at `/home/yano/rust/robot_ui/`.

### Enter the container:
```bash
docker-compose up -d
docker exec -it robot_ui bash
```

## Development Workflow

### Run Tauri in dev mode (hot reload):
```bash
cd /root
pnpm tauri dev
```

### Build for production:
```bash
cd /root
pnpm tauri build
```

### Edit code:
- On your host: `/home/yano/rust/robot_ui/`
- Frontend code: `src/`
- Rust backend: `src-tauri/src/`
- Changes sync automatically (volume mount)

## Adding ROS2 Integration (TODO)

The challenge: Integrating `sensor_msgs` with Tauri's build system.

### The Problem:
- `sensor_msgs` is generated by colcon from ros2_rust workspace
- Tauri uses standard `cargo build`, not colcon
- colcon-cargo doesn't properly inject dependencies for Tauri projects

### Options to explore:

**Option 1: Build ros2_rust workspace separately**
```bash
# Build ros2_rust workspace
cd /root
mkdir -p ros2_ws/src && cd ros2_ws
git clone https://github.com/ros2-rust/ros2_rust.git src/ros2_rust
vcs import src < src/ros2_rust/ros2_rust_jazzy.repos
source /opt/ros/jazzy/setup.bash
colcon build

# Manually add path dependencies to src-tauri/Cargo.toml:
# rclrs = { path = "../ros2_ws/install/rclrs/share/rclrs/rust" }
# sensor_msgs = { path = "../ros2_ws/install/sensor_msgs/share/sensor_msgs/rust" }
```

**Option 2: Use r2r library instead**
- `r2r` is an alternative ROS2 Rust library with better standalone support
- May work better with Tauri's build system

**Option 3: Create separate ROS2 node**
- Keep Tauri app pure Rust/JavaScript
- Create standalone ROS2 node in separate package
- Communicate via HTTP/WebSocket/IPC

## File Structure

```
/root/ (container) = /home/yano/rust/robot_ui/ (host)
├── src/                    # Frontend code
├── src-tauri/              # Rust backend
│   ├── src/lib.rs         # Main app logic
│   ├── Cargo.toml         # Rust dependencies
│   └── package.xml        # ROS2 package metadata
├── package.json            # Node dependencies
├── vite.config.ts         # Vite config
└── docker-compose.yml     # Container config
```

## Notes

- ROS2 is available in container: `source /opt/ros/jazzy/setup.bash`
- GTK warnings when running are harmless
- Rebuilding Docker image: `docker-compose build`
